<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Dashboard Token</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" />
    <meta name="description" content="Build whatever layout you need with our Architect framework.">
    <meta name="msapplication-tap-highlight" content="no">
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <!-- <link rel="stylesheet" href="./css/style.css"> -->
    <link href="./main.css" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="57x57" href="../images/favicon/apple-icon-57x57.png"/>
    <link rel="apple-touch-icon" sizes="60x60" href="../images/favicon/apple-icon-60x60.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="../images/favicon/apple-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="76x76" href="../images/favicon/apple-icon-76x76.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="../images/favicon/apple-icon-114x114.png"/>
    <link rel="apple-touch-icon" sizes="120x120" href="../images/favicon/apple-icon-120x120.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="../images/favicon/apple-icon-144x144.png"/>
    <link rel="apple-touch-icon" sizes="152x152" href="../images/favicon/apple-icon-152x152.png"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../images/favicon/apple-icon-180x180.png"/>
    <link rel="icon" type="image/png" sizes="192x192" href="../images/favicon/android-icon-192x192.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="96x96" href="../images/favicon/favicon-96x96.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon/favicon-16x16.png"/>
    <!-- librerias genericas -->
    <script src="../js/js.cookie.js"></script>
    <script src="../js/jquery.cookie.js"></script>
    <script src="../js/controllers/bell.js"></script>
    <script src="../js/controllers/company.js"></script> 

    <script type="text/javascript" src="../js/moment.min.js"></script>

    <!-- unlayereditor -->
    <script src="https://editor.unlayer.com/embed.js"></script>
    <script type="text/JavaScript"> 
        $( document ).ready(function() {

            if(!(JSON.parse($.cookie("userData")) || JSON.parse($.cookie("business"))))
                return;
            var bellData=[], balancesmsemailData

            document.getElementById("nameBussine").innerHTML = JSON.parse($.cookie("business")).nombre;
            document.getElementById("nameBussineRazon").innerHTML = JSON.parse($.cookie("business")).razon;
            document.getElementById("avatar").src = JSON.parse($.cookie("userData")).image;
            document.getElementById("datetime_campana").value = new Date();
            document.getElementById("fk_business").value = JSON.parse($.cookie("userData"))._id;

            /**
            *   init data de contenido de la campaña
            */
            // SMS
            document.getElementById("fk_sms_content_create").value = JSON.parse($.cookie("business")).nombre+ ': ';
            // EMAIL
            document.getElementById("message-email-subject-create").value = 'Sending with SendGrid test '+JSON.parse($.cookie("business")).nombre;
            document.getElementById("message-email-text-create").value = 'Test de bartertechnology desarrollo ';
            document.getElementById("message-email-html-create").value = '<strong>and easy to do anywhere, even with Node.js</strong>';
            //NOTIFICACION
            document.getElementById("message-noty-data-create").value = JSON.stringify({ href: 'tokens'});
            document.getElementById("message-noty-title-create").value = 'Test de notificacion de Token!';
            document.getElementById("message-noty-text-create").value = 'Token test de campañas';
            document.getElementById("message-noty-icon-create").value = './assets/imgs/logo_token.svg';

            // crear bell createbell
            (function() {
                'use strict';
                window.addEventListener('load', function() {
                    // Fetch all the forms we want to apply custom Bootstrap validation styles to
                    var forms = document.getElementsByClassName('needs-validation');
                    // Loop over them and prevent submission
                    var validation = Array.prototype.filter.call(forms, function(form) {
                        form.addEventListener('submit', function(event) {
                            if (form.checkValidity() === false) {
                                event.preventDefault();
                                event.stopPropagation();
                            }
                            form.classList.add('was-validated');
                        }, false);
                    });
                }, false);
            })(); 
            document.getElementById("formbell").addEventListener('submit', function (event) {  

                var valid = false

                var listasbell = [];
                var els = document.getElementsByName('segmentlistnew');
                for (var i=0;i<els.length;i++){
                  if ( els[i].checked ) {
                    listasbell.push(els[i].value);
                  }
                }

                if(listasbell.length<1){
                    document.getElementById("validlistuser").innerHTML = "Debes definir una lista de usuarios."
                }

                valid = document.getElementById("name").value && document.getElementById("datetime_campana").value  && document.getElementById("terminos").value && listasbell.length && document.getElementById("message-email-subject-create").value && document.getElementById("message-email-text-create").value && document.getElementById("message-noty-title-create").value && document.getElementById("message-noty-text-create").value && document.getElementById("message-noty-icon-create").value && unFormat(document.getElementById("saldoEstimado").innerHTML) && document.getElementById("numSmsBellCreate").value && document.getElementById("numEmailBellCreate").value;

                if(!valid)
                    return
                document.getElementById("fk_bell_user_list").value=listasbell;

                var post_url = $(this).attr("action"); //get form action url
                var request_method = $(this).attr("method"); //get form GET/POST method
                var form_data = $(this).serializeArray(); //Encode form elements for submission
                event.preventDefault(); //prevent default action 

                // document.getElementById("fk_bell_user_list"+index).value=listasbell;

                var htmlCustom = '';
                //#editorunlayer design-web editor-desktop
                if( document.getElementById('message-email-html-unlayer').checked ){
                     
                    unlayer.exportHtml(function(data) {
                        var json = data.design; // design json
                        var html = data.html; // design html
                        console.log(json)
                        console.log(html)
                        // Save the json, or html here
                        htmlCustom = html
                    });
                    /* unlayer.saveDesign(function(design) {
                        console.log('design', design);
                    }); */ 
                }else{
                    htmlCustom = document.getElementById("message-email-html-create").value
                }
                console.log(htmlCustom)

                var bodyEmail = {
                    subject:   document.getElementById("message-email-subject-create").value ,
                    text:   document.getElementById("message-email-text-create").value ,
                    html:   htmlCustom
                }   

                var bodyNotify = {
                    data:   document.getElementById("message-noty-data-create").value ,
                    title:   document.getElementById("message-noty-title-create").value ,
                    text:document.getElementById("message-noty-text-create").value,
                    icon:document.getElementById("message-noty-icon-create").value
                }   

                var body = {
                    name: document.getElementById("name").value,
                    date: document.getElementById("datetime_campana").value,
                    sms: document.getElementById("sms").checked,
                    email: document.getElementById("email").checked,
                    notipush: document.getElementById("notipush").checked,
                    defaultvalue: document.getElementById("defaultvalue").checked,
                    terminos: document.getElementById("terminos").checked,
                    fk_bell_user_list: listasbell,
                    tokenPush: 'localStorage.getItem("tokenPush")',
                    platform: 'web',
                    role: 8,

                    fk_email_plantilla: JSON.stringify(bodyEmail) ,
                    fk_sms_content: document.getElementById("fk_sms_content_create").value ,
                    fk_notification_content: JSON.stringify(bodyNotify)  
                }
                console.log("body")
                console.log(body)

                bellier.setbell(body)//JSON.parse($.cookie("userData"))._id
                .then((response)=> {
                    console.log(response)
                    if(response){ 

                        // actualizar cuenta de campaña
                        seReloadBell(unFormat(document.getElementById("saldoEstimado").innerHTML), document.getElementById("numSmsBellCreate").value, document.getElementById("numEmailBellCreate").value ) 
                        // testeo de la campaña alcance
                        if(document.getElementById("teltestcreate").value && document.getElementById("emailtestcreate").value){
                            testbellbyreq(document.getElementById("teltestcreate").value, document.getElementById("emailtestcreate").value, response.respbellcurrent._id, null)
                        }
                            
                        document.getElementById("campanaslist").innerHTML = gerTableBells(response.bells);
                        document.getElementById("errorcampana").innerHTML = `
                        <div class="alert alert-success fade show" role="alert">
                            <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                            Excelente Campaña creada con exito! 
                        </div>`;
                    }
                }, 
                (err) =>{
                    console.log("error solicitud.followers "+err)
                    document.getElementById("errorcampana").innerHTML = `
                    <div class="alert alert-warning fade show" role="alert">
                        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                        Error en la solicitud!! ${err.responseJSON.msg}
                    </div>`;
                });
            });

            // obtener lista de usuarios
            getSegmentsUser();
            // fk_plantilla 
            getBells()
            // obtener clientes de este usuario
            getClients()
            // load menu unlayer
            loadMenuTemplate(null)
        })

        var forms = document.getElementsByClassName('needs-validation');
        // Loop over them and prevent submission
        var validation = Array.prototype.filter.call(forms, function(form) {
            form.addEventListener('submit', function(event) {
                if (form.checkValidity() === false) {
                console.log(form)
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');

                console.log(form)

            }, false);
        });
        $(document).on("submit",".needs-validation",function(e){
              e.preventDefault();
              console.log("you can catch the event!");
              //and do whatever you want.
        }); 
        // obtener balance 
        function getBalance(){
            //balance sms email
            companier.balancesmsemail(JSON.parse($.cookie("userData"))._id)
            .then((response)=> {
                balancesmsemailData = response; 
                document.getElementById("numSms").innerHTML = balancesmsemailData.billpaybell ? balancesmsemailData.billpaybell.numSms: 0;
                document.getElementById("numEmail").innerHTML = balancesmsemailData.billpaybell ? balancesmsemailData.billpaybell.numEmail: 0;
                document.getElementById("saldoTotal").innerHTML = acumElementOfArrayObject(balancesmsemailData.billpayed, 'saldopay', true);
                document.getElementById("saldoTotalRestante").innerHTML = acumElementOfArrayObject(balancesmsemailData.billpayed, 'saldopay', true);
                document.getElementById("pvsms").value = balancesmsemailData.pvsms ?balancesmsemailData.pvsms:1 ;
                document.getElementById("pvemail").value = balancesmsemailData.pvemail ? balancesmsemailData.pvemail:1;


                var nodenumSms = document.getElementsByClassName('numSms');
                if(nodenumSms.length)
                for (var i = 0; i < nodenumSms.length; i++) {
                    nodenumSms[i].innerHTML = balancesmsemailData.billpaybell ? balancesmsemailData.billpaybell.numSms: 0;
                }
                var nodenumEmail = document.getElementsByClassName('numEmail');
                if(nodenumEmail.length)
                for (var i = 0; i < nodenumEmail.length; i++) {
                    nodenumEmail[i].innerHTML = balancesmsemailData.billpaybell ? balancesmsemailData.billpaybell.numEmail: 0;
                }
                var nodesaldoTotal = document.getElementsByClassName('saldoTotal');
                if(nodesaldoTotal.length)
                for (var i = 0; i < nodesaldoTotal.length; i++) {
                    nodesaldoTotal[i].innerHTML = acumElementOfArrayObject(balancesmsemailData.billpayed, 'saldopay', true);
                }
                var nodesaldoTotalRestante = document.getElementsByClassName('saldoTotalRestante');
                if(nodesaldoTotalRestante.length)
                for (var i = 0; i < nodesaldoTotalRestante.length; i++) {
                    nodesaldoTotalRestante[i].innerHTML = acumElementOfArrayObject(balancesmsemailData.billpayed, 'saldopay', true);
                }
                var nodepvsms = document.getElementsByName('pvsms');
                if(nodepvsms.length)
                for (var i = 0; i < nodepvsms.length; i++) {
                    nodepvsms[i].value = balancesmsemailData.pvsms ?balancesmsemailData.pvsms:1
                }
                var nodepvemail = document.getElementsByName('pvemail');
                if(nodepvemail.length)
                for (var i = 0; i < nodepvemail.length; i++) {
                    nodepvemail[i].value = balancesmsemailData.pvemail ? balancesmsemailData.pvemail:1;
                }
            }, 
            (err) =>{console.log("error solicitud.balancesmsemail "+err)});
        }

        // obtener campañas
        function getBells(){
            bellier.bells()//JSON.parse($.cookie("userData"))._id
            .then((response)=> {
                console.log("bells")
                console.log(response)
                bellData = response; 
                if(bellData.length)
                document.getElementById("campanaslist").innerHTML = gerTableBells(bellData);

                // obtener saldos
                getBalance()
            }, 
            (err) =>{console.log("error solicitud.followers "+err)});
        }
        /**
        * obtener segmentos de usuarios  
        */
        function getSegmentsUser(){
            //consulta de segmentos de usuarios o lista de usuarios
            bellier.getsegmentuser()//JSON.parse($.cookie("userData"))._id
            .then((response)=> {
                // console.log("segments")
                // console.log(response)
                //cities
                companier.cities()
                .then((citiesData2)=> {
                    
                    /* companier.sendgrinddesigns()
                        .then((designs)=> {
                            console.log("designs")
                            console.log(designs)
                        }, 
                        (err) =>{
                            console.log(err)
                            console.log("error solicitud.sendgrind ")
                    }) */

                    for (var i = 0; i < document.getElementsByClassName("segmentsUserData2").length; i++) {
                        document.getElementsByClassName("segmentsUserData2")[i].innerHTML = getTableUsersActSegmentSelect2(response, citiesData2, i)
                        //sendgrind/designs
                    }

                    document.getElementById("segmentsUserData").innerHTML = getTableUsersActSegmentSelect(response, citiesData2)
                })
                // console.log("bells")
                // console.log(response)
                // bellData = response; 
                // if(bellData.length)
                // document.getElementById("campanaslist").innerHTML = gerTableBells(bellData);
            }, 
            (err) =>{console.log("error solicitud.followers "+err)});
        }
        /**
        *  envio de elementos ajax
        */
        function saveListUser(){
            var choices = [];
            var els = document.getElementsByName('userlistnew');
            for (var i=0;i<els.length;i++){
              if ( els[i].checked ) {
                choices.push(els[i].value);
              }
            }

            if(choices.length){
              // alert()
              modalDialogConfirmSegment('savelistuser') 

              document.getElementById("saveFromModal").addEventListener("click", function(resss){
                var name = document.getElementById("modalNameList").value;
                console.log(resss.isTrusted)
                if(resss.isTrusted){
                    bellier.setsegmentuser({ name, fk_user: choices})//JSON.parse($.cookie("userData"))._id
                    .then((response)=> {
                        document.getElementById("errorsavelista").innerHTML = 'Lista Guardada!';
                        companier.cities()
                        .then((citiesData2)=> {

                            for (var i = 0; i < document.getElementsByClassName("segmentsUserData2").length; i++) {
                                document.getElementsByClassName("segmentsUserData2")[i].innerHTML = getTableUsersActSegmentSelect2(response, citiesData2, i)
                            }
                            document.getElementById("segmentsUserData").innerHTML = getTableUsersActSegmentSelect(response, citiesData2)
                        })
                    }, 
                    (err) =>{
                        console.log("error solicitud.followers "+err)
                        document.getElementById("errorsavelista").innerHTML = 'Error en la solicitud!'+ ` ${err.responseJSON.msg}`;
                        toastInfo('Error en la solicitud!', ` ${err.responseJSON.msg}`);
                    });
                }
              });
            }
        } 

        function editBell (index){

            $("#formbelleditar"+index).on('submit', function(evt){
                evt.preventDefault();  
                // tu codigo aqui
            });

            if(document.getElementById("formbelleditar"+index))
            document.getElementById("formbelleditar"+index).addEventListener('submit', function (event) { 


                var valid = false

                var listasbell = [];
                var els = document.getElementsByName('segmentlistnew2'+index);
                for (var i=0;i<els.length;i++){
                  if ( els[i].checked ) {
                    listasbell.push(els[i].value);
                  }
                }
                if(listasbell.length<=0){
                    document.getElementById("validlistuser"+index).innerHTML = "Debes definir una lista de usuarios."
                }

                valid = document.getElementById("bellid"+index).value && document.getElementById("name"+index).value && document.getElementById("datetime_campana"+index).value  && document.getElementById("terminos"+index).checked && listasbell.length;

                if(!valid)
                    return


                // document.getElementById("fk_bell_user_list"+index).value=listasbell;

                //htmlCustom = //#editorunlayer design-web editor-desktop

                var bodyEmail = {
                    subject:   document.getElementById("message-email-subject-edit"+index).value ,
                    text:   document.getElementById("message-email-text-edit"+index).value ,
                    html: document.getElementById("message-email-html-edit"+index).value
                }   

                var bodyNotify = {
                    data:   document.getElementById("message-noty-data-edit"+index).value ,
                    title:   document.getElementById("message-noty-title-edit"+index).value ,
                    text:document.getElementById("message-noty-text-edit"+index).value,
                    icon:document.getElementById("message-noty-icon-edit"+index).value
                }   

                var post_url = $(this).attr("action"); //get form action url
                var request_method = $(this).attr("method"); //get form GET/POST method
                var form_data = $(this).serializeArray(); //Encode form elements for submission
                event.preventDefault(); //prevent default action 
                var body = {
                    idbell: document.getElementById("bellid"+index).value,
                    name: document.getElementById("name"+index).value,
                    date: document.getElementById("datetime_campana"+index).value,
                    sms: document.getElementById("sms"+index).checked,
                    email: document.getElementById("email"+index).checked,
                    notipush: document.getElementById("notipush"+index).checked,
                    defaultvalue: document.getElementById("defaultvalue"+index).checked,
                    terminos: document.getElementById("terminos"+index).checked,
                    fk_bell_user_list: listasbell,
                    tokenPush: 'localStorage.getItem("tokenPush")',
                    platform: 'web',
                    role: 8,

                    fk_email_plantilla: JSON.stringify(bodyEmail) ,
                    fk_sms_content: document.getElementById("fk_sms_content_edit"+index).value ,
                    fk_notification_content: JSON.stringify(bodyNotify) 
                }
                console.log("body")
                console.log(body)
                bellier.putbell(body)//JSON.parse($.cookie("userData"))._id
                .then((response)=> {
                    document.getElementById("editcampanas"+index).disabled = true;

                    console.log(response)
                    if(response.length){
                        getSegmentsUser();
                        document.getElementById("campanaslist").innerHTML = gerTableBells(response);

                        document.getElementById("errorcampana"+index).innerHTML = `
                        <div class="alert alert-success fade show" role="alert">
                            <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                            Excelente Campaña actualizada con exito! 
                        </div>`;
                        document.getElementById("errorcampanabuton"+index).innerHTML = `
                        <div class="alert alert-success fade show" role="alert">
                            <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                            Excelente Campaña actualizada con exito! 
                        </div>`;
                    }
                }, 
                (err) =>{
                    console.log(err)
                    console.log("error solicitud.followers "+err)
                    document.getElementById("errorcampana"+index).innerHTML = `
                    <div class="alert alert-warning fade show" role="alert">
                        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                        Error en la solicitud!! ${err.responseJSON.msg}
                    </div>`;
                    document.getElementById("errorcampanabuton"+index).innerHTML = `
                    <div class="alert alert-warning fade show" role="alert">
                        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                        Error en la solicitud!! ${err.responseJSON.msg}
                    </div>`;
                });

            })
        }
        // preparar lista de edicion de bells
        function showEdit(i ){
            // userlistnew
            var els = document.getElementsByName('segmentlistnew2'+i);
            var els2 = document.getElementsByName("segmentlistold2"+i);
            for (var i=0;i<els.length;i++){ 
              if (els2[i] && els[i].value == els2[i].value) {
                els[i].checked=true;
              }
            }
        }
        // enviar bell por defecto
        function setBellDefault(idbell, index){
            bellier.putbelldefault(idbell)//JSON.parse($.cookie("userData"))._id
            .then((response)=> {
                console.log(response)
                if(response.length){
                    getSegmentsUser();
                    document.getElementById("campanaslist").innerHTML = gerTableBells(response); 
                    document.getElementById("errorcampanabuton"+index).innerHTML = `
                    <div class="alert alert-success fade show" role="alert">
                        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                        Excelente Campaña creada con exito! 
                    </div>`;
                }
            }, 
            (err) =>{
                console.log(err)
                console.log("error solicitud.followers "+err)
                document.getElementById("errorcampanabuton"+index).innerHTML = `
                <div class="alert alert-warning fade show" role="alert">
                    <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                    Error en la solicitud!! ${err.responseJSON.msg}
                </div>`; 
            });
        } 
        //obtener clientes
        function getClients(){
            companier.clientsforbell(JSON.parse($.cookie("userData"))._id)
            .then((response)=> {
                var usersData = response; 
                // document.getElementById("percentFollowers").innerHTML = Math.round((document.getElementById("follower").innerHTML * 100)/ usersData.fk_user_asocd.length);

                //cities
                companier.cities()
                .then((citiesData2)=> {
                    // $.cookie("userActivosData", JSON.stringify(usersData))
                    // $.cookie("citiesData", JSON.stringify(citiesData2))
                    document.getElementById("userActivos").innerHTML = getTableUsersActSelect(usersData, citiesData2)
                    document.getElementById("userActivos2").innerHTML = getTableUsersActSelect(usersData, citiesData2)
                }, 
                (err) =>{console.log("error solicitud.balancesmsemail "+err)});
            }, 
            (err) =>{console.log("error solicitud.followers "+err)});
        }
        function seReloadBell(recarga, numsms, numemail){
            let bodyreloadbell = {
                recarga: recarga,
                numSms: numsms,
                numEmail: numemail
            }
            bellier.seReloadBell(bodyreloadbell)
            .then((response)=> {
                document.getElementById("numSms").innerHTML = response.numSms
                document.getElementById("numEmail").innerHTML = response.numEmail
                document.getElementById("saldoTotal").innerHTML = format(response.saldoTotal)
                document.getElementById("saldoTotalRestante").innerHTML = format(response.saldoTotal)

                document.getElementById("errorcampana").innerHTML += `
                    <div class="alert alert-success fade show" role="alert">
                        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                        Recarga hecha con exito! 
                    </div>`;
            }, 
            (err) =>{
                var errResult = err ? err.responseJSON ? err.responseJSON.msg: '': ''
                console.log(err)
                console.log("error test  bell "+err)
                document.getElementById("errorcampana").innerHTML = `
                <div class="alert alert-warning fade show" role="alert">
                    <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                    Error en la solicitud!! ${errResult}
                </div>`;
            });
        } 
        // funcion para testear campaña
        function testbellbyreq(teltestcreate, emailtestcreate, idbell, index){

            let bodytestbell={}
            var testbell = []
            if(index){
                if(!(document.getElementById("teltestedit"+index).value && document.getElementById("emailtestedit"+index).value))
                    return


                testbell.push({tel: document.getElementById("teltestedit"+index).value, email: document.getElementById("emailtestedit"+index).value })
                bodytestbell={
                    userstest:JSON.stringify(testbell)
                }
                bellier.testbell(idbell, bodytestbell)
                .then((response)=> {
                    document.getElementById("buttontest"+index).disabled = true;

                    console.log(response)  
                    document.getElementById("smstest"+index).innerHTML = `
                    <div class="alert alert-success fade show" role="alert">
                        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                        Campaña testeada con exito! 
                    </div>`;
                }, 
                (err) =>{
                    var errResult = err ? err.responseJSON ? err.responseJSON.msg: '': JSON.stringify(err)
                    console.log(err)
                    console.log("error test  bell "+err)
                    document.getElementById("smstest"+index).innerHTML += `
                    <div class="alert alert-warning fade show" role="alert">
                        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                        Error en la solicitud!! ${errResult}
                    </div>`;
                });
            }else{
                testbell.push({tel: teltestcreate, email: emailtestcreate })
                bodytestbell={
                    userstest:JSON.parse(testbell)
                }
                bellier.testbell(idbell, bodytestbell)
                .then((response)=> {
                    console.log(response)  
                    getSegmentsUser()
                    document.getElementById("errorcampana").innerHTML = `
                    <div class="alert alert-success fade show" role="alert">
                        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                        Campaña testeada con exito! 
                    </div>`;
                }, 
                (err) =>{
                    var errResult = err ? err.responseJSON ? err.responseJSON.msg: '': ''
                    console.log(err)
                    console.log("error test  bell "+err)
                    document.getElementById("errorcampana").innerHTML += `
                    <div class="alert alert-warning fade show" role="alert">
                        <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                        Error en la solicitud!! ${errResult}
                    </div>`;
                });
            }
        }
        // borrar segemntos
        function deleteSegment(idsegemento, index, index2){
            console.log("errorcampanasegmentdeletebuton"+index+index2) 

            modalDialogConfirmSegment('editlistuser') 

            document.getElementById("editFromModal").addEventListener("click", function(resss){  

                bellier.deletesegmentuser(idsegemento)
                .then((response)=> {
                    console.log(response)   
                    document.getElementById("errorcampanasegmentdeletebuton"+index+index2).innerHTML = `
                    <span class="badge badge-success fade show">
                        Segmento eliminado con exito! 
                    </span>`;
                    $(`#sementuser${index}${index2}`).hide();
                }, 
                (err) =>{
                    var errResult = err ? err.responseJSON ? err.responseJSON.msg: '': ''
                    console.log(err)
                    console.log("error test  bell "+err)
                    document.getElementById("errorcampanasegmentdeletebuton"+index+index2).innerHTML = `
                    <span class="badge badge-danger fade show">
                        Error en la solicitud!! ${errResult}
                    </span>`;
                }); 
            });
        }
        /**
        * funcion para validar el checkeo de lanzar la campaña o programar fecha 
        **/
        function validchecked(index){
            if(index!==null){
                console.log(index)
                var els = document.getElementsByName('launch'+(index));
                console.log(els)
                var datecurrent = new Date();
                console.log(datecurrent.toISOString().replace("Z", ""));
                for (var i=0;i<els.length;i++){
                  if ( els[i].checked && els[i].value == 'launch'+index) {
                    document.getElementById("datetime_campana"+(index)).readOnly =true
                    document.getElementById("datetime_campana_backup"+(index)).value=document.getElementById("datetime_campana"+(index)).value

                    document.getElementById("datetime_campana"+(index)).value=datecurrent.toISOString().replace("Z", "")
                  }else{
                    document.getElementById("datetime_campana"+(index)).readOnly =false
                    document.getElementById("datetime_campana"+(index)).value = document.getElementById("datetime_campana_backup"+(index)).value
                  }
                }
            }else{
                var els = document.getElementsByName('launch');
                console.log(els)
                var datecurrent = new Date();
                console.log(datecurrent.toISOString().replace("Z", ""));
                for (var i=0;i<els.length;i++){
                  if ( els[i].checked && els[i].value == 'launch') {
                    document.getElementById("datetime_campana").readOnly =true
                    document.getElementById("datetime_campana").value=datecurrent.toISOString().replace("Z", "")
                  }else{
                    document.getElementById("datetime_campana").readOnly =false
                  }
                }
            }
        }
        /**
        * funcion para validar el checkeo de lanzar la campaña o programar fecha 
        **/
        var unlayer2
        function validcheckedunlayer(index, htmlcustom){
            if(index!==null){
                console.log(index)
                var contentEmailCustom = document.getElementById('message-email-html-create-content'+index);
                var contentEmailUnlayer = document.getElementById('editorunlayer'+index);
                
                var els = document.getElementById('message-email-html-unlayer'+index);
                
                unlayer.init({
                    id: 'editorunlayer'+index,
                    displayMode: 'email'
                })
                if(htmlcustom)
                unlayer.loadDesign({
                    id: 'editorunlayer'+index,
                    html: htmlcustom,
                    classic: true
                }); 
                loadMenuTemplate(index);
                
                if ( els.checked  ) {
                    
                    contentEmailCustom.classList.remove('show');
                    contentEmailCustom.classList.add('fade');

                    contentEmailUnlayer.classList.remove('fade');
                    contentEmailUnlayer.classList.add('show');
                }else{
                    contentEmailCustom.classList.remove('fade');
                    contentEmailCustom.classList.add('show');

                    contentEmailUnlayer.classList.remove('show');
                    contentEmailUnlayer.classList.add('fade');
                }
            }else{ 
                
                var contentEmailCustom = document.getElementById('message-email-html-create-content');
                var contentEmailUnlayer = document.getElementById('editorunlayer');
                
                var els = document.getElementById('message-email-html-unlayer');
                
                if ( els.checked  ) {
                    contentEmailCustom.classList.remove('fade');
                    contentEmailCustom.classList.add('show');

                    contentEmailUnlayer.classList.remove('show');
                    contentEmailUnlayer.classList.add('fade');
                }else{
                    contentEmailCustom.classList.remove('show');
                    contentEmailCustom.classList.add('fade');

                    contentEmailUnlayer.classList.remove('fade');
                    contentEmailUnlayer.classList.add('show');
                }
            }
        }
        /**
        *   funcion para generar todas plantillas
        */
        function loadMenuTemplate(index){ 
                 
            companier.getjsondisaen()
            .then((response)=> {
                if(response){
                    if(index==null){
                        var unlayermenus= document.getElementsByClassName("templateseditorunlayer")
                        for (let j = 0; j < unlayermenus.length; j++) {
                            const element = unlayermenus[j];
                            element.innerHTML = getTableUnlayerMenu(response, null)
                        }
                    }else{
                        var unlayermenus2= document.getElementsByClassName("templateseditorunlayer"+index)
                        for (let j = 0; j < unlayermenus2.length; j++) {
                            const element2 = unlayermenus2[j];
                            element2.innerHTML = getTableUnlayerMenu(response, index)
                        }
                    }
                }
            }) 
            
        }
        function loadTemplate(id, index) { 
            
            companier.getjsondisaen()
            .then((bodyunlayer)=> {
                if(index==null){
                    if(bodyunlayer.length)
                    for (let i = 0; i < bodyunlayer.length; i++) { 
                        if (id == bodyunlayer[i].id) {
                            //unlayer.loadDesign(bodyunlayer[i].json);
                            unlayer.loadTemplate(bodyunlayer[i].id); 
                        }
                    }
                }else{
                    if(bodyunlayer.length) 
                    for (let i = 0; i < bodyunlayer.length; i++) { 
                        if (id == bodyunlayer[i].id) {
                            //unlayer.loadDesign(bodyunlayer[i].json);

                            
                            var $parent = $('#editorunlayer'+index).parent();
                            $('#editorunlayer'+index).remove();
                            $parent.append(`<div id="editorunlayer${index}" style="height: 1024px;margin:15px"></div>`);

                            var $parent = $('#editorunlayer').parent();
                            $('#editorunlayer').remove();
                            $parent.append(`<div id="editorunlayer" style="height: 1024px;margin:15px"></div>`);

                            unlayer.init({
                                id: 'editorunlayer'+index,
                                displayMode: 'email'
                            })  
                            unlayer.loadDesign(bodyunlayer[i].json);
                        }
                    }
                }
            }) 
        }
    </script> 
</head>
<body class="scrollbar scrollbar-mean-fruit">
    <div id="toasts"></div>
    <div class="modal fade" tabindex="-1" role="dialog" id="modalTokens">
        <div class="modal-dialog modal-lg" role="document" id="modalTokensContent">
            
        </div>
    </div>
    <div class="app-container app-theme-white body-tabs-shadow fixed-sidebar fixed-header">
        <div class="app-header header-shadow">
            <div class="app-header__logo">
                <div class="logo-src"></div>
                <div class="header__pane ml-auto">
                    <div>
                        <button type="button" class="hamburger close-sidebar-btn hamburger--elastic" data-class="closed-sidebar">
                            <span class="hamburger-box">
                                <span class="hamburger-inner"></span>
                            </span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="app-header__mobile-menu">
                <div>
                    <button type="button" class="hamburger hamburger--elastic mobile-toggle-nav">
                        <span class="hamburger-box">
                            <span class="hamburger-inner"></span>
                        </span>
                    </button>
                </div>
            </div>
            <div class="app-header__menu">
                <span>
                    <button type="button" class="btn-icon btn-icon-only btn btn-primary btn-sm mobile-toggle-header-nav">
                        <span class="btn-icon-wrapper">
                            <i class="fa fa-ellipsis-v fa-w-6"></i>
                        </span>
                    </button>
                </span>
            </div>    
            <div class="app-header__content">
                <div class="app-header-left">
                    <div class="search-wrapper">
                        <div class="input-holder">
                            <input type="text" class="search-input" placeholder="Type to search">
                            <button class="search-icon"><span></span></button>
                        </div>
                        <button class="close"></button>
                    </div>
                    <ul class="header-menu nav">
                        <li class="nav-item">
                            <a href="javascript:void(0);" class="nav-link">
                                <i class="nav-link-icon fa fa-database"> </i>
                                Estadísticas
                            </a>
                        </li>
                        <li class="btn-group nav-item">
                            <a href="javascript:void(0);" class="nav-link">
                                <i class="nav-link-icon fa fa-edit"></i>
                                Campañas
                            </a>
                        </li>
                        <li class="dropdown nav-item">
                            <a href="javascript:void(0);" class="nav-link">
                                <i class="nav-link-icon fa fa-cog"></i>
                                Configuraciones
                            </a>
                        </li>
                    </ul>        
                </div>
                <div class="app-header-right">
                    <div class="header-btn-lg pr-0">
                        <div class="widget-content p-0">
                            <div class="widget-content-wrapper">
                                <div class="widget-content-left">
                                    <div class="btn-group">
                                        <a data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="p-0 btn">
                                            <img width="42" class="rounded-circle" id="avatar" src="assets/images/avatars/1.jpg" alt="">
                                            <i class="fa fa-angle-down ml-2 opacity-8"></i>
                                        </a>
                                        <div tabindex="-1" role="menu" aria-hidden="true" class="dropdown-menu dropdown-menu-right">
                                            <button type="button" tabindex="0" class="dropdown-item">Perfil</button>
                                            <button type="button" tabindex="0" class="dropdown-item">Configuración</button>
                                            <div tabindex="-1" class="dropdown-divider"></div>
                                            <a href="../iniciarsesion.php" class="nav-link dropdown-item">Salir</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="widget-content-left  ml-3 header-user-info">
                                    <div class="widget-heading" id="nameBussine">
                                        <!-- Café Kaldi -->
                                    </div>
                                    <div class="widget-subheading" id="nameBussineRazon">
                                        <!-- VP People Manager -->
                                    </div>
                                </div>
                                <div class="widget-content-right header-user-info ml-3">
                                    <button type="button" class="btn-shadow p-1 btn btn-primary btn-sm show-toastr-example">
                                        <i class="fa text-white fa-calendar pr-1 pl-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>        
                </div>
            </div>
        </div>        
        <div class="ui-theme-settings">
            <button type="button" id="TooltipDemo" class="btn-open-options btn btn-warning">
                <i class="fa fa-cog fa-w-16 fa-spin fa-2x"></i>
            </button>
            <div class="theme-settings__inner">
                <div class="scrollbar-container">
                    <div class="theme-settings__options-wrapper">
                        <h3 class="themeoptions-heading">Layout Options
                        </h3>
                        <div class="p-3">
                            <ul class="list-group">
                                <li class="list-group-item">
                                    <div class="widget-content p-0">
                                        <div class="widget-content-wrapper">
                                            <div class="widget-content-left mr-3">
                                                <div class="switch has-switch switch-container-class" data-class="fixed-header">
                                                    <div class="switch-animate switch-on">
                                                        <input type="checkbox" checked data-toggle="toggle" data-onstyle="success">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="widget-content-left">
                                                <div class="widget-heading">Fixed Header
                                                </div>
                                                <div class="widget-subheading">Makes the header top fixed, always visible!
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li class="list-group-item">
                                    <div class="widget-content p-0">
                                        <div class="widget-content-wrapper">
                                            <div class="widget-content-left mr-3">
                                                <div class="switch has-switch switch-container-class" data-class="fixed-sidebar">
                                                    <div class="switch-animate switch-on">
                                                        <input type="checkbox" checked data-toggle="toggle" data-onstyle="success">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="widget-content-left">
                                                <div class="widget-heading">Fixed Sidebar
                                                </div>
                                                <div class="widget-subheading">Makes the sidebar left fixed, always visible!
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li class="list-group-item">
                                    <div class="widget-content p-0">
                                        <div class="widget-content-wrapper">
                                            <div class="widget-content-left mr-3">
                                                <div class="switch has-switch switch-container-class" data-class="fixed-footer">
                                                    <div class="switch-animate switch-off">
                                                        <input type="checkbox" data-toggle="toggle" data-onstyle="success">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="widget-content-left">
                                                <div class="widget-heading">Fixed Footer
                                                </div>
                                                <div class="widget-subheading">Makes the app footer bottom fixed, always visible!
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <h3 class="themeoptions-heading">
                            <div>
                                Header Options
                            </div>
                            <button type="button" class="btn-pill btn-shadow btn-wide ml-auto btn btn-focus btn-sm switch-header-cs-class" data-class="">
                                Restore Default
                            </button>
                        </h3>
                        <div class="p-3">
                            <ul class="list-group">
                                <li class="list-group-item">
                                    <h5 class="pb-2">Choose Color Scheme
                                    </h5>
                                    <div class="theme-settings-swatches">
                                        <div class="swatch-holder bg-primary switch-header-cs-class" data-class="bg-primary header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-secondary switch-header-cs-class" data-class="bg-secondary header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-success switch-header-cs-class" data-class="bg-success header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-info switch-header-cs-class" data-class="bg-info header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-warning switch-header-cs-class" data-class="bg-warning header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-danger switch-header-cs-class" data-class="bg-danger header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-light switch-header-cs-class" data-class="bg-light header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-dark switch-header-cs-class" data-class="bg-dark header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-focus switch-header-cs-class" data-class="bg-focus header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-alternate switch-header-cs-class" data-class="bg-alternate header-text-light">
                                        </div>
                                        <div class="divider">
                                        </div>
                                        <div class="swatch-holder bg-vicious-stance switch-header-cs-class" data-class="bg-vicious-stance header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-midnight-bloom switch-header-cs-class" data-class="bg-midnight-bloom header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-night-sky switch-header-cs-class" data-class="bg-night-sky header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-slick-carbon switch-header-cs-class" data-class="bg-slick-carbon header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-asteroid switch-header-cs-class" data-class="bg-asteroid header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-royal switch-header-cs-class" data-class="bg-royal header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-warm-flame switch-header-cs-class" data-class="bg-warm-flame header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-night-fade switch-header-cs-class" data-class="bg-night-fade header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-sunny-morning switch-header-cs-class" data-class="bg-sunny-morning header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-tempting-azure switch-header-cs-class" data-class="bg-tempting-azure header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-amy-crisp switch-header-cs-class" data-class="bg-amy-crisp header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-heavy-rain switch-header-cs-class" data-class="bg-heavy-rain header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-mean-fruit switch-header-cs-class" data-class="bg-mean-fruit header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-malibu-beach switch-header-cs-class" data-class="bg-malibu-beach header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-deep-blue switch-header-cs-class" data-class="bg-deep-blue header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-ripe-malin switch-header-cs-class" data-class="bg-ripe-malin header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-arielle-smile switch-header-cs-class" data-class="bg-arielle-smile header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-plum-plate switch-header-cs-class" data-class="bg-plum-plate header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-happy-fisher switch-header-cs-class" data-class="bg-happy-fisher header-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-happy-itmeo switch-header-cs-class" data-class="bg-happy-itmeo header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-mixed-hopes switch-header-cs-class" data-class="bg-mixed-hopes header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-strong-bliss switch-header-cs-class" data-class="bg-strong-bliss header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-grow-early switch-header-cs-class" data-class="bg-grow-early header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-love-kiss switch-header-cs-class" data-class="bg-love-kiss header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-premium-dark switch-header-cs-class" data-class="bg-premium-dark header-text-light">
                                        </div>
                                        <div class="swatch-holder bg-happy-green switch-header-cs-class" data-class="bg-happy-green header-text-light">
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <h3 class="themeoptions-heading">
                            <div>Sidebar Options</div>
                            <button type="button" class="btn-pill btn-shadow btn-wide ml-auto btn btn-focus btn-sm switch-sidebar-cs-class" data-class="">
                                Restore Default
                            </button>
                        </h3>
                        <div class="p-3">
                            <ul class="list-group">
                                <li class="list-group-item">
                                    <h5 class="pb-2">Choose Color Scheme
                                    </h5>
                                    <div class="theme-settings-swatches">
                                        <div class="swatch-holder bg-primary switch-sidebar-cs-class" data-class="bg-primary sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-secondary switch-sidebar-cs-class" data-class="bg-secondary sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-success switch-sidebar-cs-class" data-class="bg-success sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-info switch-sidebar-cs-class" data-class="bg-info sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-warning switch-sidebar-cs-class" data-class="bg-warning sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-danger switch-sidebar-cs-class" data-class="bg-danger sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-light switch-sidebar-cs-class" data-class="bg-light sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-dark switch-sidebar-cs-class" data-class="bg-dark sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-focus switch-sidebar-cs-class" data-class="bg-focus sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-alternate switch-sidebar-cs-class" data-class="bg-alternate sidebar-text-light">
                                        </div>
                                        <div class="divider">
                                        </div>
                                        <div class="swatch-holder bg-vicious-stance switch-sidebar-cs-class" data-class="bg-vicious-stance sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-midnight-bloom switch-sidebar-cs-class" data-class="bg-midnight-bloom sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-night-sky switch-sidebar-cs-class" data-class="bg-night-sky sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-slick-carbon switch-sidebar-cs-class" data-class="bg-slick-carbon sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-asteroid switch-sidebar-cs-class" data-class="bg-asteroid sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-royal switch-sidebar-cs-class" data-class="bg-royal sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-warm-flame switch-sidebar-cs-class" data-class="bg-warm-flame sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-night-fade switch-sidebar-cs-class" data-class="bg-night-fade sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-sunny-morning switch-sidebar-cs-class" data-class="bg-sunny-morning sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-tempting-azure switch-sidebar-cs-class" data-class="bg-tempting-azure sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-amy-crisp switch-sidebar-cs-class" data-class="bg-amy-crisp sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-heavy-rain switch-sidebar-cs-class" data-class="bg-heavy-rain sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-mean-fruit switch-sidebar-cs-class" data-class="bg-mean-fruit sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-malibu-beach switch-sidebar-cs-class" data-class="bg-malibu-beach sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-deep-blue switch-sidebar-cs-class" data-class="bg-deep-blue sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-ripe-malin switch-sidebar-cs-class" data-class="bg-ripe-malin sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-arielle-smile switch-sidebar-cs-class" data-class="bg-arielle-smile sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-plum-plate switch-sidebar-cs-class" data-class="bg-plum-plate sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-happy-fisher switch-sidebar-cs-class" data-class="bg-happy-fisher sidebar-text-dark">
                                        </div>
                                        <div class="swatch-holder bg-happy-itmeo switch-sidebar-cs-class" data-class="bg-happy-itmeo sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-mixed-hopes switch-sidebar-cs-class" data-class="bg-mixed-hopes sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-strong-bliss switch-sidebar-cs-class" data-class="bg-strong-bliss sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-grow-early switch-sidebar-cs-class" data-class="bg-grow-early sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-love-kiss switch-sidebar-cs-class" data-class="bg-love-kiss sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-premium-dark switch-sidebar-cs-class" data-class="bg-premium-dark sidebar-text-light">
                                        </div>
                                        <div class="swatch-holder bg-happy-green switch-sidebar-cs-class" data-class="bg-happy-green sidebar-text-light">
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <h3 class="themeoptions-heading">
                            <div>Main Content Options</div>
                            <button type="button" class="btn-pill btn-shadow btn-wide ml-auto active btn btn-focus btn-sm">Restore Default
                            </button>
                        </h3>
                        <div class="p-3">
                            <ul class="list-group">
                                <li class="list-group-item">
                                    <h5 class="pb-2">Page Section Tabs
                                    </h5>
                                    <div class="theme-settings-swatches">
                                        <div role="group" class="mt-2 btn-group">
                                            <button type="button" class="btn-wide btn-shadow btn-primary btn btn-secondary switch-theme-class" data-class="body-tabs-line">
                                                Line
                                            </button>
                                            <button type="button" class="btn-wide btn-shadow btn-primary active btn btn-secondary switch-theme-class" data-class="body-tabs-shadow">
                                                Shadow
                                            </button>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>        
        <div class="app-main">
            <div class="app-sidebar sidebar-shadow">
                <div class="app-header__logo">
                    <div class="logo-src"></div>
                    <div class="header__pane ml-auto">
                        <div>
                            <button type="button" class="hamburger close-sidebar-btn hamburger--elastic" data-class="closed-sidebar">
                                <span class="hamburger-box">
                                    <span class="hamburger-inner"></span>
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="app-header__mobile-menu">
                    <div>
                        <button type="button" class="hamburger hamburger--elastic mobile-toggle-nav">
                            <span class="hamburger-box">
                                <span class="hamburger-inner"></span>
                            </span>
                        </button>
                    </div>
                </div>
                <div class="app-header__menu">
                    <span>
                        <button type="button" class="btn-icon btn-icon-only btn btn-primary btn-sm mobile-toggle-header-nav">
                            <span class="btn-icon-wrapper">
                                <i class="fa fa-ellipsis-v fa-w-6"></i>
                            </span>
                        </button>
                    </span>
                </div>    <div class="scrollbar-sidebar">
                    <div class="app-sidebar__inner">
                        <ul class="vertical-nav-menu">
                            <li class="app-sidebar__heading">TOKEN</li>
                            <li>
                                <a href="index.html">
                                    <i class="metismenu-icon pe-7s-rocket"></i>
                                    Dashboard Token
                                </a>
                            </li>
                            <li>
                                <a href="estadisticas.html">
                                    <i class="metismenu-icon pe-7s-diamond"></i>
                                    Estadísticas
                                    <!-- <i class="metismenu-state-icon pe-7s-angle-down caret-left"></i> -->
                                </a>

                                
                            </li>
                                
                                <li>
                                <a href="campanas.html" class="mm-active">
                                    <i class="metismenu-icon pe-7s-car"></i>
                                    Campañas
                                    <!-- <i class="metismenu-state-icon pe-7s-angle-down caret-left"></i> -->
                                </a>
                                </li>

                            <li>
                                <a href="usuarios-adm.html">
                                    <i class="metismenu-icon pe-7s-display2"></i>
                                    Usuarios
                                </a>
                            </li>



                            <li>
                                <a href="premios.html">
                                    <i class="metismenu-icon pe-7s-display2"></i>
                                    Premios
                                </a>
                            </li>


                            <li>
                                <a href="sucursales.html">
                                    <i class="metismenu-icon pe-7s-mouse">
                                    </i>Sucursales
                                </a>
                            </li>
                            <li>
                                <a href="#calif">
                                    <i class="metismenu-icon pe-7s-eyedropper">
                                    </i>Calificaciones
                                </a>
                            </li>
                            
                        </ul>
                    </div>
                </div>
            </div>    
            <div class="app-main__outer">
                <div class="app-main__inner">
                    <div class="app-page-title">
                        <div class="page-title-wrapper">
                            <div class="page-title-heading">
                                <div class="page-title-icon">
                                    <i class="pe-7s-graph text-success">
                                    </i>
                                </div>
                                <div>Crear Campaña
                                    <div class="page-title-subheading">Crea tu campaña publicitaria, para que puedas aumentar tus ventas.
                                    </div>
                                </div>
                            </div>   
                        </div>
                    </div>
                    
                    <ul class="body-tabs body-tabs-layout tabs-animated body-tabs-animated nav">
                    
                        <li class="nav-item">
                            <a role="tab" class="nav-link active" id="tab-1" data-toggle="tab" href="#campanaslist" onclick="positionCorrect('tab-1')">
                                <span>Lista de Campañas</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a role="tab" class="nav-link " id="tab-2" data-toggle="tab" href="#tab-content-1" onclick="positionCorrect('tab-1')">
                                <span>Crear Campaña</span>
                            </a> 
                        </li>
                    </ul>

                    <div class="tab-content">
                        <!-- campañas lista --> 
                        <div class="tab-pane tabs-animation fade show active" id="campanaslist" role="tabpanel">
                            No tiene Campañas
                        </div>
                        <!-- campañas crear --> 
                        <div class="tab-pane tabs-animation fade show " id="tab-content-1" role="tabpanel">
                            <form  class="needs-validation" novalidate  action="#" method="post"  id="formbell">
                                <div class="mb-3 card">
                                    <div class="card-body">
                                        <ul class="tabs-animated-shadow tabs-animated nav">
                                            <li class="nav-item">
                                                <a role="tab" class="nav-link active" id="tab-c-1" data-toggle="tab" href="#campanassegmentocreate">
                                                    <span>Segmento de Usuarios</span>
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a role="tab" class="nav-link" id="tab-c-2" data-toggle="tab" href="#campanascontentcreate">
                                                    <span>Contenido de las Campañas</span>
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a role="tab" class="nav-link" id="tab-c-3" data-toggle="tab" href="#campanasalcancecreate">
                                                    <span>Alcance</span>
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a role="tab" class="nav-link" id="tab-c-4" data-toggle="tab" href="#campanasrevisioncreate">
                                                    <span>Revision - (opcional)</span>
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a role="tab" class="nav-link " id="tab-c-0" data-toggle="tab" href="#campanasdatacreate">
                                                    <span>Datos de la Campañas - Guardar Todo</span>
                                                </a>
                                            </li>
                                        </ul>
                                        <div class="tab-content">

                                            <!-- SEGMENTO DE USUARIO -->
                                            <div class="tab-pane active" id="campanassegmentocreate" role="tabpanel">
                                                <!-- <div class="main-card mb-12 card">  -->
                                                    <div class="card-header">
                                                        <i class="header-icon lnr-license icon-gradient bg-plum-plate"> </i>
                                                        SEGMENTO DE USUARIO
                                                        <div class="btn-actions-pane-right">
                                                            <div role="group" class="btn-group-sm nav btn-group">
                                                                <a data-toggle="tab" href="#userlist" class="btn-shadow active btn btn-primary">Listas</a>
                                                                <a data-toggle="tab" href="#createuserlist" class="btn-shadow   btn btn-primary">Crear Lista</a>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="tab-content">
                                                        <!-- user lista --> 
                                                        <div class="tab-pane tabs-animation fade show active" id="userlist" role="userlist">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <div class="main-card mb-12 card">
                                                                        <!-- lista de usuarios -->
                                                                        <div id="segmentsUserData" class="accordion-wrapper mb-3">
                                                                            <div class="card">
                                                                                <div id="headingOne" class="card-header">
                                                                                    <button type="button" data-toggle="collapse" data-target="#collapseOne1" aria-expanded="true" aria-controls="collapseOne" class="text-left m-0 p-0 btn btn-link btn-block">
                                                                                        <h5 class="m-0 p-0">No tiene listas</h5>
                                                                                    </button>
                                                                                </div>
                                                                                <div data-parent="#segmentsUserData" id="collapseOne1" aria-labelledby="headingOne" class="collapse show">
                                                                                    <div class="card-body">---
                                                                                    </div>
                                                                                </div>
                                                                            </div> 
                                                                        </div>
                                                                    </div>  
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- crear user lets -->
                                                        <div class="tab-pane tabs-animation fade show " id="createuserlist" role="createuserlist">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <div class="main-card mb-12 card">
                                                                        <div class="card-body">
                                                                            <!-- <h5 class="card-title">Crear Lista de Usuarios</h5> -->
                                                                            <div class="col-md-12 mb-12">
                                                                                <!-- <label for="search">Username</label> -->
                                                                                <div class="input-group">
                                                                                    <div class="input-group-prepend">
                                                                                        <span class="input-group-text" id="validationTooltipUsernamePrepend">
                                                                                            <i class="fa fa-search icon-gradient bg-sunny-morning"> </i>
                                                                                        </span>
                                                                                    </div>

                                                                                    <input type="number" min="0" class="form-control" id="searchedadmenor" placeholder="Edad Menor ..." aria-describedby="validationTooltipUsernamePrepend" onkeyup="searchsegmentcreate()">

                                                                                    <input type="number" min="0" class="form-control" id="searchedadmayor" placeholder="Edad Mayor ..."  aria-describedby="validationTooltipUsernamePrepend" onkeyup="searchsegmentcreate()">

                                                                                    <div class="input-group-append">
                                                                                        <button class="btn btn-primary" type="button" onclick="searchgenerocreate('male')">Hombre</button>
                                                                                    </div>
                                                                                    <div class="input-group-append">
                                                                                        <button class="btn btn-info" type="button" onclick="searchgenerocreate('female')">Mujer</button>
                                                                                    </div>
                                                                                    <div class="input-group-append">
                                                                                        <button class="btn btn-warning" type="button" onclick="searchgenerocreate('other')">Otro</button>
                                                                                    </div>
                                                                                    <div class="input-group-append">
                                                                                        <button class="btn btn-danger" type="button" onclick="searchgenerocreate('')">Todos</button>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="main-card mb-12 card">
                                                                            
                                                                                <!-- Active Users --> 
                                                                                <div class="table-responsive">
                                                                                    <table class="align-middle mb-0 table table-borderless table-striped table-hover">
                                                                                        <thead>
                                                                                        <tr>
                                                                                            <th>Nombre</th>
                                                                                            <th class="text-center">Ciudad</th>
                                                                                            <th class="text-center">Genero</th>
                                                                                            <th class="text-center">Edad</th>
                                                                                            <th class="text-center">Action</th>
                                                                                        </tr>
                                                                                        </thead>
                                                                                        <tbody id="userActivos">
                                                                                        <tr>
                                                                                            <td>
                                                                                                <div class="widget-content p-0">
                                                                                                    <div class="widget-content-wrapper">
                                                                                                        <div class="widget-content-left mr-3">
                                                                                                            <div class="widget-content-left">
                                                                                                                <img width="40" class="rounded-circle" src="assets/images/avatars/4.jpg" alt="">
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div class="widget-content-left flex2">
                                                                                                            <div class="widget-heading">---- ----</div>
                                                                                                            <div class="widget-subheading opacity-7">--- ---</div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </td>
                                                                                            <td class="text-center">---</td>
                                                                                            <td class="text-center">---</td>
                                                                                            <td class="text-center">---</td>
                                                                                            <td class="text-center text-muted">
                                                                                                <div class="switch-animate switch-off">
                                                                                                    <input type="checkbox" data-toggle="toggle" data-onstyle="success">
                                                                                                </div>
                                                                                            </td>
                                                                                        </tr> 
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>

                                                                                <div id="errorsavelista"> 
                                                                                </div> 

                                                                                <div class="d-block text-center card-footer">
                                                                                    <!-- <button class="mr-2 btn-icon btn-icon-only btn btn-outline-danger"><i class="pe-7s-trash btn-icon-wrapper"> </i></button> -->
                                                                                    <button class="btn-wide btn btn-success" onclick="saveListUser()"  data-toggle="modal" data-target="#modalTokens">Guardar lista</button>
                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> 
                                                <!-- </div> -->
                                            </div>

                                            <!-- Contenido de las Campañas -->
                                            <div class="tab-pane" id="campanascontentcreate" role="tabpanel">
                                                <div class="col-md-12">
                                                    <!-- <div class="main-card mb-12 card">  -->

                                                        <div class="card-header">
                                                            <i class="header-icon lnr-license icon-gradient bg-plum-plate"> </i>
                                                            Contenido de las Campañas
                                                            <div class="btn-actions-pane-right">
                                                                <div role="group" class="btn-group-sm nav btn-group" id="tabContenido">
                                                                    <a data-toggle="tab" href="#smscreate" class="btn-shadow active btn btn-primary" id="tabcontcreate0">Mensaje</a>
                                                                    <a data-toggle="tab" href="#emailcreate" class="btn-shadow   btn btn-primary" id="tabcontcreate1">Email</a>
                                                                    <a data-toggle="tab" href="#noticreate" class="btn-shadow   btn btn-primary" id="tabcontcreate2">Notificacion</a>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="tab-content">
                                                            
                                                            <!-- Mensaje --> 
                                                            <div class="tab-pane tabs-animation fade show active" id="smscreate" role="smscreate">
                                                                <div class="card-body">
                                                                    <!-- <h5 class="card-title">Bootstrap 4 Form Validation</h5> -->
                                                                    <div class="form-grid">
                                                                        <div class="form-row">
                                                                            <div class="col-md-12 mb-6">
                                                                                <div class="form-group">
                                                                                    <label for="message-text-create" class="col-form-label">Contenido del Mensage de texto:</label>
                                                                                    <textarea class="form-control" id="fk_sms_content_create" ></textarea>
                                                                                </div>
                                                                            </div>  
                                                                        </div> 
                                                                        <button class="btn btn-primary" type="button" onclick="nextItemContenido(0)">Guardar Mensaje</button>
                                                                    </div> 
                                                                </div>
                                                            </div>
                                                            <!-- Email --> 
                                                            <div class="tab-pane tabs-animation fade show " id="emailcreate" role="emailcreate">
                                                                <div class="card-body">
                                                                    <!-- <h5 class="card-title">Bootstrap 4 Form Validation</h5> -->
                                                                    <div class="form-grid">
                                                                        <div class="form-row">
                                                                            <div class="col-md-4 mb-4">
                                                                                <div class="form-group">
                                                                                    <label for="message-text-create" class="col-form-label">Tema Asunto:</label>
                                                                                    <input class="form-control" id="message-email-subject-create" >
                                                                                </div>  
                                                                            </div> 
                                                                            <div class="col-md-12 mb-12">
                                                                                <div class="form-group">
                                                                                    <label for="message-text-create" class="col-form-label">Texto:</label>
                                                                                    <textarea class="form-control" id="message-email-text-create" ></textarea>
                                                                                </div>
                                                                            </div>
                                                                            
                                                                            <div class="col-md-12 mb-12 form-group">
                                                                                <h5>Contenido del Email:</h5>
                                                                            </div>

                                                                            <div class="col-md-2 mb-2 form-group">
                                                                                <label for="checkmessage-email-html-unlayer">Usar Codigo personalizado</label>
                                                                                <div class=" ">
                                                                                    <div class="theme-switch-wrapper">
                                                                                        <label class="theme-switch" for="message-email-html-unlayer">
                                                                                            <input type="checkbox" id="message-email-html-unlayer" name="message-email-html-unlayer" value="message-email-html-unlayer" onchange="validcheckedunlayer(null, '')"/>
                                                                                            <div class="slider round"></div>
                                                                                        </label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-md-10 mb-10 fade" id="message-email-html-create-content">
                                                                                <div class="form-group">
                                                                                    <label for="message-text-create" class="col-form-label">Texto Html:</label>
                                                                                    <textarea class="form-control" id="message-email-html-create" ></textarea>
                                                                                </div>
                                                                            </div>  
                                                                        </div>

                                                                        
                                                                        <div class="form-row">                                                                            
                                                                            <div class="templateseditorunlayer">
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-row">
                                                                            <div id="editorunlayer" style="height: 1024px;" class="scrollbar scrollbar-mean-fruit"></div>
                                                                            <script>
                                                                                unlayer.init({
                                                                                    id: 'editorunlayer',
                                                                                    projectId: 7213,
                                                                                    templateId: "19506"
                                                                                })
                                                                            </script>
                                                                        </div>
                                                                        <button class="btn btn-primary" type="button" onclick="nextItemContenido(1)">Guardar Email</button>
                                                                    </div> 
                                                                </div>
                                                            </div>
                                                            <!-- Notificacion --> 
                                                            <div class="tab-pane tabs-animation fade show " id="noticreate" role="noticreate">
                                                                <!-- <div class="card-body"> -->
                                                                    <!-- <h5 class="card-title">Bootstrap 4 Form Validation</h5> -->
                                                                    <div class="form-grid">
                                                                        <div class="form-row">
                                                                            <div class="col-md-4 mb-4">
                                                                                <div class="form-group">
                                                                                    <label for="message-text-create" class="col-form-label">Ruta al acceder a la Notificacion:</label>
                                                                                    <input class="form-control" id="message-noty-data-create" >
                                                                                </div>  
                                                                            </div> 
                                                                            <div class="col-md-4 mb-4">
                                                                                <div class="form-group">
                                                                                    <label for="message-text-create" class="col-form-label">Titulo:</label>
                                                                                    <input class="form-control" id="message-noty-title-create" >
                                                                                </div>
                                                                            </div> 
                                                                            <div class="col-md-4 mb-4">
                                                                                <div class="form-group">
                                                                                    <label for="message-text-create" class="col-form-label">Icono:</label>
                                                                                    <input class="form-control" id="message-noty-icon-create" >
                                                                                </div>
                                                                            </div>  
                                                                            <div class="col-md-12 mb-12">
                                                                                <div class="form-group">
                                                                                    <label for="message-text-create" class="col-form-label">Texto:</label>
                                                                                    <textarea class="form-control" id="message-noty-text-create" ></textarea>
                                                                                </div>
                                                                            </div> 
                                                                        </div> 
                                                                        <button class="btn btn-primary" type="button" onclick="nextItemContenido(2)">Guardar Notificacion</button>
                                                                    </div> 
                                                                <!-- </div> -->
                                                            </div>
                                                        </div>

                                                    <!-- </div> -->
                                                </div> 
                                            </div>

                                            <!-- ALCANCE -->
                                            <div class="tab-pane" id="campanasalcancecreate" role="tabpanel">

                                                <div class="col-md-12">

                                                    <div class="card-header"> 
                                                        <button class="btn-shadow mr-3 btn btn-alternate" data-toggle="tooltip" data-placement="top" title="Para recargar pulsa en recargar y luego destina tu recarga a la campaña">
                                                            <i class="fa pe-7s-info text-white "></i>
                                                            Disponibildad:  
                                                        </button>

                                                        <button type="button" class="btn-shadow mr-3 btn btn-success" data-toggle="tooltip" data-placement="top" title="Mensajes de texto disponibles para las campañas">
                                                            <i class="fa fa-phone text-white "></i>
                                                            Mensajes:
                                                            <span id="numSms"> 0</span> 
                                                        </button>  

                                                        <button type="button" class="btn-shadow mr-3 btn btn-success"data-toggle="tooltip" data-placement="top" title="Correos disponibles para las campañas">
                                                            <span class="text-white">
                                                                <i class="fa pe-7s-mail text-white "></i>
                                                                Emails: 
                                                                <span id="numEmail"> 0</span>
                                                            </span>
                                                        </button>  

                                                        <button type="button" class="btn-shadow mr-3 btn btn-success" >
                                                            <!-- data-toggle="modal" data-target="#modalTokens" onclick="formRecargaEmailsSms()" -->
                                                            <span class="text-white">
                                                                <i class="fa pe-7s-refresh-2 text-white "></i>
                                                                Saldo para Recargar Sms y Emails: 
                                                                <span id="saldoTotal"> 0</span>
                                                            </span>
                                                        </button>  
                                                    </div>

                                                    <div class="tab-content">
                                                        <div class="tab-pane tabs-animation fade show active" id="smscreate" role="smscreate"> 
                                                            <!-- <div class="card-body"> -->
                                                                <div class="form-grid">
                                                                    <div class="form-row">
                                                                        <div class="col-md-6 mb-6">
                                                                            <label for="numSmsBellCreate">
                                                                                <div class="font-icon-wrapper font-icon-lg"><i class="fa fa-phone icon-gradient bg-night-fade"> </i></div>
                                                                                    Numero de Mensajes de Texto SMS
                                                                            </label>
                                                                            <input name="numSmsBellCreate" id="numSmsBellCreate" onkeyup="calcSaldoRestante()" placeholder="Numero de Mensajes de Texto SMS" type="number" min="0" class="form-control" required>
                                                                            <div class="valid-feedback">
                                                                                Bien!
                                                                            </div>
                                                                            <div class="invalid-feedback">
                                                                                Por favor ponga un numero correcto.
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-6 mb-6">
                                                                            <label for="numEmailBellCreate">  
                                                                                <div class="font-icon-wrapper font-icon-lg"><i class="fa pe-7s-mail icon-gradient bg-night-fade"> </i></div>
                                                                                    Numero de Correos
                                                                            </label>
                                                                            <input name="numEmailBellCreate" id="numEmailBellCreate" onkeyup="calcSaldoRestante()" placeholder="Numero de Correos" type="number" min="0" class="form-control" required>
                                                                            <div class="valid-feedback">
                                                                                Bien!
                                                                            </div>
                                                                            <div class="invalid-feedback">
                                                                                Por favor ponga un numero correcto.
                                                                            </div>
                                                                        </div>
                                                                        <input type="hidden" name="pvemail" id="pvemail">
                                                                        <input type="hidden" name="pvsms" id="pvsms">
                                                                        <div class="card-footer text-center"> 
                                                                                <label class="btn-shadow mr-3 btn btn-success" id="saldoTotalRestanteBotoncreate">
                                                                                    <span class="text-white">
                                                                                        <i class="fa pe-7s-refresh-2 text-white "></i>
                                                                                        Saldo Restante: 
                                                                                        <span id="saldoTotalRestante"> 0</span>
                                                                                    </span>
                                                                                </label>  
                                                                                <label class="btn-shadow mr-3 btn btn-success" >
                                                                                    <span class="text-white">
                                                                                        <i class="fa pe-7s-refresh-2 text-white "></i>
                                                                                        Saldo Estimado: 
                                                                                        <span id="saldoEstimado"> 0</span>
                                                                                    </span>
                                                                                </label>  
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            <!-- </div> -->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- REVISION -->
                                            <div class="tab-pane" id="campanasrevisioncreate" role="tabpanel">
                                                <div class="card-body"><h5 class="card-title">Revision - agrega un correo y un telefono para testear</h5>
                                                    <div class="form-grid">
                                                        <div class="form-row">
                                                            <div class="col-md-6 mb-6">
                                                                <label for="teltestcreate">Numero de telefono para testear</label>
                                                                <input name="teltestcreate" id="teltestcreate" placeholder="Numero de telefono para testear 57312..." type="tel" class="form-control">
                                                                <div class="valid-feedback">
                                                                    Bien!
                                                                </div>
                                                                <div class="invalid-feedback">
                                                                    Por favor ponga un telefono.
                                                                </div>
                                                            </div> 
                                                            <div class="col-md-6 mb-6">
                                                                <label for="emailtestcreate">Email para testear</label>
                                                                <input name="emailtestcreate" id="emailtestcreate" placeholder="Email para testear" type="email" class="form-control">
                                                                <div class="valid-feedback">
                                                                    Bien!
                                                                </div>
                                                                <div class="invalid-feedback">
                                                                    Por favor ponga un email.
                                                                </div>
                                                            </div> 
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Crear Campaña -->
                                            <div class="tab-pane" id="campanasdatacreate" role="tabpanel">
                                                <!-- <div class="main-card mb-12 card"> -->
                                                    <div class="card-body"><h5 class="card-title">Crear Campaña</h5>
                                                        
                                                        <div class="form-grid">
                                                            <div class="form-row">

                                                                <div class="col-md-6 mb-6">
                                                                    <label for="Nombre">Nombre</label>
                                                                    <input name="name" id="name" placeholder="Nombre de la campaña" type="text" class="form-control" required>
                                                                    <div class="valid-feedback">
                                                                        Bien!
                                                                    </div>
                                                                    <div class="invalid-feedback">
                                                                        Por favor ponga un nombre.
                                                                    </div>
                                                                </div> 
                                                                <div class="col-md-4 mb-4">
                                                                    <label for="examplePassword">Fecha de lanzamiento</label>
                                                                    <input name="datetime_campana" id="datetime_campana"  placeholder="datetime-campana" type="datetime-local" value="" class="form-control" required>
                                                                    <div class="valid-feedback">
                                                                        Bien!
                                                                    </div>
                                                                    <div class="invalid-feedback">
                                                                        Por favor ponga una fecha.
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-2 mb-2 form-group">
                                                                    <label for="checklaunch">Lanzar al guardar</label>
                                                                    <div class=" ">
                                                                        <div class="theme-switch-wrapper">
                                                                            <label class="theme-switch" for="launch">
                                                                                <input type="checkbox" id="launch" name="launch" value="launch" onchange="validchecked(null)"/>
                                                                                <div class="slider round"></div>
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-row">
                                                                <div class="col-sm-4 col-md-3 form-group">
                                                                    <label for="Nombre" class=" col-form-label">Enviar mensajes</label>
                                                                    <div class=" ">
                                                                        <div class="theme-switch-wrapper">
                                                                            <label class="theme-switch" for="sms">
                                                                                <input type="checkbox" id="sms" name="sms" />
                                                                                <div class="slider round"></div>
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="col-sm-4 col-md-3 form-group">
                                                                    <label for="Nombre" class=" col-form-label">Enviar Email</label>
                                                                    <div class=" ">
                                                                        <div class="theme-switch-wrapper">
                                                                            <label class="theme-switch" for="email">
                                                                                <input type="checkbox" id="email" name="email" />
                                                                                <div class="slider round"></div>
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class=" form-group col-sm-4 col-md-3  ">
                                                                    <label for="Nombre" class="col-form-label">Enviar Notificaciones</label>
                                                                    <div class=" ">
                                                                        <div class="theme-switch-wrapper">
                                                                            <label class="theme-switch" for="notipush">
                                                                                <input type="checkbox" id="notipush" name="notipush" />
                                                                                <div class="slider round"></div>
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="col-sm-4 col-md-3  form-group">
                                                                    <label for="Nombre" class="col-form-label">Campaña por defecto</label>
                                                                    <div class=" ">
                                                                        <div class="theme-switch-wrapper">
                                                                            <label class="theme-switch" for="defaultvalue">
                                                                                <input type="checkbox" id="defaultvalue" name="defaultvalue" />
                                                                                <div class="slider round"></div>
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>  

                                                            <!-- <div class="position-relative row form-group"><label for="exampleSelectMulti" class="col-sm-2 col-form-label">Select Multiple</label>
                                                                <div class="col-sm-10"><select multiple="" name="selectMulti" id="exampleSelectMulti" class="form-control"></select></div>
                                                            </div> -->
                                                            <!-- <div class="position-relative row form-group"><label for="exampleText" class="col-sm-2 col-form-label">Text Area</label>
                                                                <div class="col-sm-10"><textarea name="text" id="exampleText" class="form-control"></textarea></div>
                                                            </div> -->
                                                            <label>
                                                                <div class="position-relative row form-group"><label for="exampleFile" class="col-sm-4 col-form-label">Terminos y Condiciones</label>
                                                                    <div class="col-sm-8">
                                                                        <div class="position-relative form-check">
                                                                            <label class="form-check-label">
                                                                                <input name="terminos" id="terminos" type="checkbox" class="form-check-input" required> 
                                                                                <label class="form-check-label" for="invalidCheck">
                                                                                    Acepto los terminos y condiciones
                                                                                </label>
                                                                                <div class="invalid-feedback">
                                                                                    Aun no has aceptado los terminos y condiciones.
                                                                                </div>
                                                                            </label>
                                                                        </div>
                                                                        <small class="form-text text-muted">Al aceptar, aceptas que los datos suministrados se usaran para realizar campañas publicitarias y marketing digital mediante el envio de mensajes de texto, email y notificaciones push a los dispositivos asociados con la app Token App, y el uso de los mismos para estudio.</small>
                                                                    </div>
                                                                </div>
                                                            </label>

                                                            <div class="position-relative row form-group"><label for="Nombre" class="col-sm-4 col-form-label"></label>
                                                                <div class="col-sm-8">
                                                                    <input name="fk_bell_user_list" id="fk_bell_user_list" placeholder="lista usuarios" class="form-control" required style="display:none">
                                                                    <div class="invalid-feedback" id="validlistuser">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="position-relative row form-group"><label for="Nombre" class="col-sm-4 col-form-label"></label>
                                                                <div class="col-sm-8">
                                                                <input type="text" name="fk_business" id="fk_business" style="display:none">
                                                                    <div class="invalid-feedback">
                                                                        Error en ID.
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div id="errorcampana">
                                                            </div>

                                                            <button type="submit" class="mb-2 mr-2 btn btn-primary btn-lg btn-block">Guardar Campañas
                                                            </button> 
                                                        </div>
                                                    </div>
                                                <!-- </div>  -->
                                            </div>
                                        </div>
                                    </div>
                                </div> 
                            </form>
                        </div>
                    </div>
                </div>    
            </div>
        </div>
    </div>  
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script> -->
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script> -->
    <script type="text/javascript" src="../js/script.js"></script>
    <script type="text/javascript" src="./assets/scripts/main.js"></script>
    <script type="text/javascript" src="./assets/scripts/campanas.js"></script> 
</body>
</html>
